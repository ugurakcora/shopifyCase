{{ 'swiper-bundle.min.css' | asset_url | stylesheet_tag }}
{{ 'swiper-bundle.min.js' | asset_url | script_tag }}
{{ 'gsap.min.js' | asset_url | script_tag }}
{{ 'split-type.min.js' | asset_url | script_tag }}

<style>
  @font-face {
    font-family: 'ITC Avant Garde Gothic LT Bold';
    src: url({{ 'ITCAvantGardeGothicLTBold.otf' | asset_url }});
  }

  @font-face {
    font-family: 'Avenir Heavy';
    src: url({{ 'AvenirHeavy.ttf' | asset_url }});
  }

  @font-face {
    font-family: 'Avenir Book';
    src: url({{ 'AvenirBook.ttf' | asset_url }});
  }

  @font-face {
    font-family: 'Avenir Medium';
    src: url({{ 'AvenirMedium.ttf' | asset_url }});
  }
</style>

<!-- Intro Animation -->
<div class="fixed inset-0 bg-white z-10 intro">
  <p class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-[50px] md:text-[20px] font-['Avenir_Heavy'] whitespace-nowrap inline-flex opacity-0">
    <span>case-exampleWebsite3</span>
    <span>.saintyusuf.com</span>
  </p>
</div>

<!-- Main Container -->
<div class="w-full h-screen flex flex-col md:flex-row container">
  
  <!-- Left Column - Image -->
  <div class="w-full md:w-1/2 relative overflow-hidden container-part-image">
    <img src="{{ 'main.png' | asset_url }}" alt="Image" class="w-full h-full object-cover">
    <div class="absolute inset-0 md:hidden bg-gradient-to-t from-black/40 to-transparent"></div>
  </div>

  <!-- Right Column - Content -->
  <div class="w-full md:w-1/2 flex flex-col md:pl-[120px] md:pt-[100px] -mt-[190px] md:mt-0 container-part-content">
    <div class="mx-[22px] md:mx-0 mb-[30px] md:mb-[65px] md:w-[70%] w-[85%] texts">
      <h1 class="hidden md:block font-['ITC_Avant_Garde_Gothic_LT_Bold'] text-[31px] leading-[1.3] mb-5 title-desktop">
        Everyday items, we have something to suit every occasion.
      </h1>
      <h1 class="block md:hidden font-['ITC_Avant_Garde_Gothic_LT_Bold'] text-[20px] text-white mb-[22px] title-mobile">
        Everyday tops, we have something to suit every occasion.
      </h1>
      <p class="hidden md:block font-['Avenir_Book'] text-base leading-[1.5] text-[#888] mb-[35px] description">
        At suspendisse augue lectus arcu, accumsan ut sit posuere vitae sit tincidunt semper eu proin leo gravida cursus.
      </p>
      <p class="font-['Avenir_Heavy'] text-[12.5px] md:text-[13px] leading-[1.5] w-fit border-b border-black md:border-white text-black md:text-white pb-[3px] capitalize whitespace-nowrap title-slider">
        Shop all everyday items
      </p>
    </div>

    <!-- Swiper Slider -->
    <div class="swiper w-full px-[22px] md:pr-[30px] md:pl-0 pb-[22px] md:pb-0">
      <div class="swiper-wrapper">
        {% for product in collections.all.products limit: 6 %}
          <div class="swiper-slide flex flex-col w-fit select-none">
            <img src="{{ product.featured_image | img_url: 'large' }}" alt="{{ product.title }}" class="w-[148px] md:w-[230px] h-[200px] md:h-[310px] mb-[10px]">
            <p class="font-['Avenir_Book'] text-[13px] mb-[5px] h-[40px] md:h-auto w-[148px] md:w-auto">{{ product.title }}</p>
            <div class="flex flex-col md:flex-row bottom">
              <p class="font-['Avenir_Book'] text-[13px] h-[20px]">{{ product.price | money }}</p>
              <div class="flex items-center mt-[6px] md:mt-0 md:ml-auto colors">
                {% for variant in product.variants limit: 4 %}
                  <div class="w-[12px] h-[12px] mx-[3px] md:mx-[4px] first:ml-0 last:mr-0 rounded-full cursor-pointer color {% if forloop.first %}selected{% endif %}">
                    <div class="w-full h-full rounded-full pointer-events-none color-inside" style="background-color: {% if variant.option1 %}{{ variant.option1 }}{% else %}{% assign color_index = forloop.index0 | modulo: 4 %}{% if color_index == 0 %}#99C3CC{% elsif color_index == 1 %}#CC9999{% elsif color_index == 2 %}#CB99CC{% else %}#A6CC99{% endif %}{% endif %}"></div>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
      <div class="swiper-button-prev hidden md:flex border border-[#ddd] w-[40px] h-[40px] left-[45px] after:text-[15px] after:text-[#333] hover:bg-gray-50"></div>
      <div class="swiper-button-next hidden md:flex border border-[#ddd] w-[40px] h-[40px] right-[45px] after:text-[15px] after:text-[#333] hover:bg-gray-50"></div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Renk değiştirme
    document.querySelectorAll(".color").forEach(color => {
      color.addEventListener("click", (e) => {
        const colors = e.target.parentElement.querySelectorAll(".color");
        colors.forEach(color => {
          color !== e.target ? color.classList.remove("selected") : null;
        });
        e.target.classList.add("selected");
      });
    });
    
    // Swiper inisiyalizasyonu
    const swiper = new Swiper(".swiper", {
      speed: 300,
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      breakpoints: {
        0: {
          slidesPerView: "auto",
          spaceBetween: 13,
        },
        800: {
          slidesPerView: "auto",
          spaceBetween: 30,
        }
      }
    });

    // GSAP animasyonları
    const tl = gsap.timeline();

    const introSecondTextSplitted = new SplitType(".intro p span:last-of-type", {
      types: "chars, words",
      tagName: "span"
    });

    const titleDesktopSplitted = new SplitType(".title-desktop", {
      types: "chars, words",
      tagName: "span"
    });

    const titleMobileSplitted = new SplitType(".title-mobile", {
      types: "chars, words",
      tagName: "span"
    });

    const titleDescriptionSplitted = new SplitType(".description", {
      types: "chars, words",
      tagName: "span"
    });

    const titleSliderSplitted = new SplitType(".title-slider", {
      types: "chars, words",
      tagName: "span"
    });

    // INTRO
    tl.set(".intro p", {
      opacity: 1
    });
    
    tl.fromTo(".intro p", {
      top: "100%",
      scale: 0.25
    },{
      duration: 1.5,
      ease: "power4.out",
      top: "50%",
      scale: 1
    });

    tl.from(introSecondTextSplitted.chars, {
      duration: 0.1,
      ease: "power3.in",
      opacity: 0,
      y: 5,
      stagger: 0.05
    }, "-=0.25");
    
    tl.from(".intro p span:last-of-type", {
      duration: 0.75,
      ease: "power3.in",
      width: 0,
    }, "<");
    
    tl.to(".intro p", {
      duration: 0.55,
      ease: "power3.out",
      scale: 1.7
    }, "+=1");

    tl.to(".intro p", {
      duration: 0.7,
      ease: "power2.in",
      scale: 0,
    });

    tl.to(".intro", {
      duration: 1.5,
      ease: "power4.out",
      top: window.innerWidth < 800 ? "100vh" : 0,
      left: window.innerWidth > 800 ? "100vw" : 0,
    });

    // SAYFA İÇERİĞİ
    tl.from(".container-part-image img", {
      duration: 3,
      ease: "power4.out",
      scale: 1.75,
    }, "<");

    tl.from(titleDesktopSplitted.chars, {
      duration: 0.1,
      ease: "power4.out",
      stagger: 0.03,
      opacity: 0,
    }, "<");

    tl.from(titleMobileSplitted.chars, {
      duration: 0.1,
      ease: "power4.out",
      stagger: 0.03,
      opacity: 0,
    }, "<");

    tl.from(titleDescriptionSplitted.chars, {
      duration: 0.1,
      ease: "power4.out",
      stagger: 0.02,
      opacity: 0,
    }, "<");

    tl.from(titleSliderSplitted.chars, {
      duration: 0.1,
      ease: "power4.out",
      stagger: 0.03,
      opacity: 0,
    }, "<");

    tl.from(".title-slider", {
      duration: 1,
      ease: "power1.in",
      borderColor: "#fff",
      width: 0,
    }, "<");

    tl.from(".swiper-slide", {
      duration: 0.5,
      ease: "power1.in",
      opacity: 0,
      stagger: 0.5,
    }, "<");

    tl.from(".swiper-button-prev, .swiper-button-next", {
      duration: 0.25,
      ease: "power1.in",
      opacity: 0,
    }, "<");
  });

  // Seçili renk için Tailwind CSS stilini ekle
  document.head.insertAdjacentHTML('beforeend', `
    <style>
      .color.selected {
        padding: 2px;
        border: 1px solid #000;
      }
    </style>
  `);
</script>
